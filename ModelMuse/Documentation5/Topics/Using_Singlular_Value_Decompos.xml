<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" status="Under Construction" lasteditedby="rbwinst" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">Using SVD Assist</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">Using SVD Assist</text></para>
    </header>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">SVD-Assist is described in chapter 10 of the PEST user manual. Using SVD Asist requires the use of the PSTCLEAN utility program. If the &quot;i64&quot; version of PEST is being used, it may be necessary to install the PSTCLEAN utility program in the PEST directory because at the time of this writing, it did not come in i64execs.zip. </text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">If SVD Assist is used with Singular Value Decomposition in PEST, &quot;super-parameters&quot; can be used to reduce the PEST execution time. You can select </text><text styleclass="Strong" translate="true">File|Export|PEST|Calculate Number of Super-Parameters</text><text styleclass="Normal" translate="true"> to display the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SupCalc_Options_Dialog_Box" styleclass="Strong" translate="true">SUPCALC Options</link><text styleclass="Normal" translate="true"> dialog box. In it, the user must select an existing PEST control file and </text><text styleclass="Font Style" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:none; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">specify a value greater than zero for the expected value of the measurement objective function.</text><text styleclass="Normal" translate="true"> ModelMuse will create a PEST Control File, and then use the SUPCALC PEST utility program to modify the PEST control file. After running SUPCALC with the modified PEST control file, it will restore the backed-up PEST control file. SUPCALC will display the minimum and maximum number of super-parameters to use with the model.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">When calculating the number of super-parameters, the following steps are taken. If the option to run PEST is selected, ModelMuse will back up the existing PEST control file and export a new one suitable for use with SUPCALC. The purpose of running PEST is to generate a .jco file. If one has already been created, it may not be necessary to run PEST. Then ModelMuse creates an input file for SUPCALC and a batch file named RunSupCalc.bat to run SUPCALC. The batch file will first run PEST if that option is selected and then restore the backed-up PEST control file. It will then include a command to run SUPCALC. If the option to run SUPCALC is selected, ModelMuse will start the RunSupCalc.bat batch file. SUPCALC will display the minimum number of super-parameters for the model.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">Next, the user can select </text><text styleclass="Strong" translate="true">File|Export|PEST|Modify PEST Control File with SVDAPREP</text><text styleclass="Normal" translate="true"> to display the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="SVDAPrep_Input_Dialog_Box" styleclass="Strong" translate="true">SVDAPREP Input</link><text styleclass="Normal" translate="true"> dialog box. This dialog box will allow you to generate a PEST control file suitable for use with Singular Value Decomposition by running the SVDAPREP PEST utility program and then run PEST with the modified PEST control file.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">When modifying the PEST control file with SVDAPREP, the following steps are taken. First a new PEST control file is exported followed by an input file for SVDAPREP. After creating the input file for SVDAPREP, ModelMuse checks whether the working directory contains the PEST utility programs parcalc.exe and picalc.exe. If not it copies them from the PEST directory into the working directory. These programs will be used by PEST when running the model. Next ModelMuse creates a batch file to run SVDAPREP. The first command in the batchfile calls the PEST utility program PSTCLEAN. PSTCLEAN removes comments from the PEST control file and creates a new PEST control file whose name is the same as the original name with &quot;_Svda&quot; added to the file root. The next command in the batch file will call SVDAPREP to generate another PEST control file. Its name is the same as the original name with &quot;_PostSvda&quot; added to the file root. If the option to run PEST is selected, the final command in the batch file will run PEST with the control file generated by SVDAPREP. If the option to run SVDAPREP is selected, ModelMuse will start the batch file that run SVDAPREP.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">When parameter estimation is complete, PEST would normally conduct a final run using the estimated parameter values but this is not possible when SVD Assist is used. However, the user can make such a run themselves using the PEST utility program PARREP. To do so, select </text><text styleclass="Strong" translate="true">File|Export|PEST|Replace Parameters in PEST Control File</text><text styleclass="Normal" translate="true"> and select the .bpa file generated by PEST. The root of the .bpa file will be the PEST control file used as input for SVDAPREP. PARREP will create a new PEST control file whose root will end with &quot;_svda_parrep&quot;. Then PEST will run the model once with the estimated parameter values.</text></para>
  </body>
</topic>
