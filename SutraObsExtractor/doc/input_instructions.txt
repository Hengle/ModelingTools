SutraObsExtractor is a program for extracting simulated values from SUTRA output files at particular locations and times and printing them in a simple format. It also can create an instruction file for either PEST or UCODE. Together, these two functions can simplify the usage of PEST or UCODE with SUTRA models.

The documentation for SUTRA version 3.0 identifies several different types of output files. SutraObsExtractor can extract simulated values from the following file types.

‘OBC’ = “.obc” output file (observations)
‘BCOF’ = “.bcof” output file (specifications and results at fluid-source/sink nodes)
‘BCOP’ = “.bcop” output file (specifications and results at specified-pressure nodes)
‘BCOU’ = “.bcou” output file (specifications and results at specified-concentration/temperature nodes)
‘BCOPG’ = “.bcopg” output file (specifications and results at generalized-flow nodes)
‘BCOUG’ = “.bcoug” output file (specifications and results at generalized-transport nodes)
‘LKST’ = “.lkst” output file (lake stages)

SutraObsExtractor is run from the command line. The name of an input file must be supplied on the command line. There are three ways to supply the name of the input file.
SutraObsExtractor -f <filename>
SutraObsExtractor --file <filename>
SutraObsExtractor <filename>
where "<filename>" is the name of the file. Any file names that include whitespace must be enclosed in single or double quotation marks. Single or double quotation marks around other file names are optional.

The input file must contain several sections. Each section begins with "BEGIN" followed by a keyword and ends with "END" followed by the same keyword. Keywords are case insensitive. However, in these instructions, keywords are always written in upper case letters. The keywords that identify sections are "OPTIONS", "OBSERVATION_FILES", "IDENTIFIERS", and "DERIVED_OBSERVATIONS". Any line that is empty, or contain only whitespace characters is ignored. Any line whose first non-whitespace character is "#" is treated as a comment. Whitespace characters at the beginning of a line are ignored.

OPTIONS section

OPTIONS section structure

BEGIN OPTIONS
  [LISTING <filename>]
  [INSTRUCTION <filename> [<instruction file type>]}
  [VALUES <filename>]
END OPTIONS

OPTIONS section description

The OPTIONS section is used for specifying the names of output files from SutraObsExtractor. Each non-blank and non-comment line in the OPTIONS section must begin with one of the following keywords: "LISTING", "VALUES", or "INSTRUCTION". Each of these keywords must be followed by a file name. The INSTRUCTION file name may be optionally followed by either "UCODE" or "PEST".
The LISTING file is optional. If specified, it contains a record of the steps taken during execution of SutraObsExtractor. It will end either with a line indicating that it terminated normally or with an error message. The LISTING file is useful for identifying errors in the input. 
Either a VALUES or INSTRUCTION file is required. Typically only one or the other is specified but both may be specified in the same input file.
The VALUES file will contain the simulated values extracted from the SUTRA output file or files. Each line in the VALUES file will contain an observation name followed by the simulated value associated with that name.
The INSTRUCTION file contains instuctions for either UCODE or PEST to extract simulated values from the VALUES file. The desired format may be specified with <instruction file type>.
<filename> is the name of a file. If the file name contains whitespace characters, the file name must be surrounded by double quotes.
<instruction file type> must be either "UCODE" or "PEST". It indicates whether the instruction file is designed to be used with the UCODE or PEST parameter estimation programs. If <instruction file type> is not specified, it defaults to PEST.

OPTIONS section Examples

BEGIN OPTIONS
  LISTING C:\ModelingTools\SutraObsExtractor\tests\SutraLake2.soeOut
  INSTRUCTION C:\ModelingTools\SutraObsExtractor\tests\SutraLake2.soeIns.txt
END OPTIONS

BEGIN OPTIONS
  LISTING SutraLake2.soeList
  VALUES SutraLake2.soeValues
END OPTIONS

OBSERVATION_FILES section 
OBSERVATION_FILES section structure

BEGIN OBSERVATION_FILES
  FILENAME <filename> <file type>
  [FILENAME <filename> <file type>]
  [FILENAME <filename> <file type>]
  ...
  [FILENAME <filename> <file type>]
END OBSERVATION_FILES

OBSERVATION_FILES section description
Each non-blank, non-comment line in the OBSERVATION_FILES group must begin with the keyword FILENAME followed by the name of the file and the file type. 
<filename> is the name of a file generated by SUTRA that contains information about simulated values that can be compared with observations. If the file name contains whitespace characters, the file name must be surrounded by double quotes.
<file type> is a keyword indicating the type of SUTRA output file that will be read. <file type> must be one of the following OBC, LKST, BCOP, BCOF, BCOU, BCOPG, or BCOUG. For more information about these file types, see the documentation for SUTRA version 3.

OBSERVATION_FILES section example

BEGIN OBSERVATION_FILES
  FILENAME SutraLake2_Object9.obc OBC
  FILENAME SutraLake2.lkst LKST
  FILENAME SutraLake2.bcop BCOP
  FILENAME SutraLake2.bcof BCOF
  FILENAME SutraLake2.bcou BCOU
  FILENAME SutraLake2.bcopg BCOPG
  FILENAME SutraLake2.bcoug BCOUG
END OBSERVATION_FILES


IDENTIFIERS section

IDENTIFIERS section structure

BEGIN IDENTIFIERS
  ID <identifier> <observation_type> [<secondary identifier>]
    OBSNAME <observation_name>  <observation_time>  [PRINT]
    OBSNAME <observation_name>  <observation_time>  [PRINT]
    ...
    OBSNAME <observation_name>  <observation_time>  [PRINT]
  ID <identifier> <observation_type> [<secondary identifier>]
    OBSNAME <observation_name>  <observation_time>  [PRINT]
    OBSNAME <observation_name>  <observation_time>  [PRINT]
    ...
    OBSNAME <observation_name>  <observation_time>  [PRINT]
END IDENTIFIERS

IDENTIFIERS section description
The IDENTIFIERS section is used to identify simulated values to be extracted from the SUTRA output files. These values may either represent values that should be directly compared to observed values or they may be combined with other extracted values using the methods available in the DERIVED_OBSERVATIONS section.
ID is a keyword used to indicated that the following values on the line will be used to identify a particular time series from which values are to be extracted. 
<identifier> is a value in the output file that identifies a particular time series. The nature of <identifier> varies depending on the type of file from which the simulated value is to be extracted.
For OBC files, <identifier> is the "Name" listed in the OBC file.
For LKST files, <identifier> is the node number listed in the LKST file.
For all other files, <identifier> is the sequence number in which the values appear in the file for each time step for which values are recorded.
<observation_type> is used to identify the type of data to be extracted. The allowed values of <observation_type> vary depending on the type of file from which values are to be extracted.

IDENTIFIERS section example

DERIVED_OBSERVATIONS section
DERIVED_OBSERVATIONS section structure
DERIVED_OBSERVATIONS section description
DERIVED_OBSERVATIONS section example
