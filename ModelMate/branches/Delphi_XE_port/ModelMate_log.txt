July 24, 2007 

I copied the contents of ModelMate052 to ModelMate_for_svn_import.  From now on (after I do a checkout), the E:\Delphi_projects\ModelMate directory will hold the current working copy of ModelMate, and I'll keep backups in the subversion repository https://colab.sc.egov.usda.gov/svn/GWModelTools/. 

I have set svn:ignore (on server side) to ignore:

*.bdsproj.local *.bpl *.dcu *.dpk *.exe *.identicache *.lst *.mod *.obj *.res __history ModelSupport_ModelMate

Richard made some changes to DataGrid.pas.  I copied the source code related to TDataGrid and TDBDataGrid to E:\Delphi_projects\ModelMate and set up project DataGrids.bpl in that directory.  These source code files are now under version control.

July 27, 2007

Modified Model menu to convert "Model I/O" to bring up a submenu containing "Template Files" and "Instruction Files".  Next thing to do is to make a "Template Files" form, which would list information on template files and have a button to bring up another form that would be a Template-File Builder.

The Instruction Files menu item should bring up an "Instruction Files" form, which would list information on instruction files.  At first, just plan on supporting the StandardFile option to read dependents from a Modflow _os file.  Have a button that runs some code to check for observations that are defined but not listed in an Instruction File.

Nov. 28, 2007

Just getting local files and repository files to be identical.  I had made some minor changes to ModelMate main form as of 8/16/07, which weren't committed at that time, so I am doing it now.

Oct. 17, 2008

Changed types of several fields and properties of class UcProject (SosSurface, StartRes, IntermedRes, FinalRes) from boolean to string12.  As a result, earlier .mtc files will not be read correctly.

Oct. 28, 2008

Found out OGW wants GWM-Parallel to have priority over ModelMate.  Made a few minor changes to ModelMate before putting it on back burner.  Version = 0.0.3.1

Jan. 7, 2009

Starting to work with Richard on interaction between ModelMuse and ModelMate.

Added procedure TParamSet.SetGpDefault to ensure that TProject.ParGpSet has at least one parameter group.  If not, a group named ParamDefault is added.  This was needed because mtc file generated by ModelMuse lacks a parameter group.

Jan. 8, 2009

Edited TUcProject.BuildUcodeControlDataBlock in UcodeUnit to change value type from vtBool to vtStr for SosSurface, StartRes, IntermedRes, and FinalRes.

Jan. 14, 2009

Have been working on manipulation (add, delete, rename) of observations and observation groups, parameters and parameter groups.  

Feb. 2, 2009

Eliminated AppDirectory from TProject, so it needs to be removed from mtc files.

Feb. 3, 2009

Predictions are working now.  The easiest way to define predictions is by using menu: Import...MODFLOW-2005 Observations as Predictions.  This will import the observations as predictions and create an instruction file for extracting model-calculated values from each observation output file listed in the selected name file.  After a name file for a predictive model is set by importing predictions, a different name file (for a different predictive model) can be selected by using menu: Model...MODFLOW Settings.

Feb. 9, 2009

Disabled non-functioning menu choices.  Changed version to 0.1.0.  

Feb. 10, 2009

Distributed current version to Mary and Eileen.

Feb. 11, 2009

Revised RunUcode to correctly set current directory before invoking Ucode.  Changed Basic Ucode Settings to display full paths in edit boxes.  Changed View...Ucode input file to use full path rather than relative path, which can be wrong if browser has been used in another directory.  Changed version to 0.1.1

Feb. 12, 2009

Edited TDataGridInplaceEdit.ValidateContent in DataGrid.pas to allow TDataGrid objects to accept text pasted from the clipboard.

Feb. 16, 2009

Changed TFormModelIO.FormShow to display full paths rather than relative paths in data grid.

Feb. 17, 2009

Added initialization and finalization sections to GlobalBasicData, GlobalData, and ModelMateClassesUnit units.  Removed initialize and free procedures from ModelMateUtilities.

Added procedure ExecuteCommand in Utilities unit.  ExecuteCommand executes a system command, which may include command-line parameters.

Feb. 26, 2009

Corrected BuildMF2005InstructFiles to assign appropriate NSkip in instruction files for flow observations, where NSkip should = 0.

Fixed bug in operation of OK button on Program Locations form.  Now it is always enabled.

Fixed misspelling in cmbStartSens on UCODE_2005 Settings form.

Fixed bug that prevented use of pathnames with embedded spaces.

Changed Obs & Pred table-configuration windows to restrict PlotSymbol to either Default or Groups table.

Fixed bug in assignment of project file name on renaming project under menu Project...Project Name and Title.

Changed version to 0.3.0.

Mar. 2, 2009 

Changes to:

File viewer: Document is read-only, "Editor" removed from title bar, initial position at top.
Model Commands form: Check for existence of Modflow executable and name file when generating command.
Instruction-file names: Now defined as model-ouput-filename + ".jif".
Improved handling of relative paths.

Modified frmModelIO to introduce and manipulate its own TModelIOPairs object instead of directly using properties of PCurrent.  Edited Interaction_todo.txt to describe need to bug fix related to relative path names.

Mar. 3, 2009

Changed version to 0.4.0.

Moved creation of RunUcode.bat from RunUcode procedure to ExportUcode procedure of frmMainUnit.

Mar. 9, 2009

Revised usage of TProject.ProjName.  Now it is disconnected from mtc file name.  It is used now only for naming the batch file generated to run Ucode.

Fixed bug related to button to create a model command.  The test for existence of the Modflow name file was faulty.

Fixed bad anchors for Configure Tables buttons on Observation, Prior Info, and Predictions forms.  Changed to make it so ProjName is not used when saving project file.

Mar. 10, 2009

Added project filename to Caption of main form.  Modified Save As dialog to show current filename as default for new filename.

Fixed bug related to program locations.  Now, program locations actually will be stored as absolute paths.
Revised and simplified frmModelIO to avoid checking for existence of file names. (It should be possible to specify a model-output file that does not yet exist.)

Version = 0.7

Revised importation of observations from MODFLOW-2005 so that MOFiles (or MOFilesPred) is cleared before new model-output and instruction files are added.  

Corrected problem in display of Configure Prior Info Tables form.
Added partial support for invoking residual_analysis.  Support does not include preparation of an .rs file, so all input is by default...user could prepare a .rs file, however.

Mar. 11, 2009

Added "Summary of ___" label to Observations, Prior Information, and Predictions tabs.

Version = 0.8

Correct bug in TFormMain.actResidualAnalysisExecute ... need to wait for program execution to complete.

Mar. 12, 2009

Added menu item Import...Optimized Parameters to support replacing parameter values in PCurrent.ParamSet with values read from a _paopt file written by Ucode as part of a parameter-estimation run.

Version = 0.9

Mar. 23, 2009

Edited function RelativePath to delete all single- and double-quote characters from path before returning.

Minor change to UcodeBasicSettingsUnit form.

Mar. 24, 2009

Edited TProject.NumAdjustable to compare parameter group name to ParGpSet.Items[].Name.

Mar. 25, 2009

Added ModelMateVersion published property to TProject.  Fixed bug that caused ProjChanged to be set to True if a file with UsePriorInfo=True is opened.

April 9, 2009

Added fields and published properties related to derived parameters to class TParam.

Added menu item Configure to main form and forms for observations, prior info, and predictions.  Eliminated Configure Tables buttons from these forms to make room for Derived ___ buttons

Started implementing a Derived Parameters form.

Version = 0.10.5

April 10, 2009

Added parameter attribute type patDerived to hold Yes or No.  DeriveEqn is a field to hold the equation used to derive the parameter.  Modified Assign methods for TParameterSetup and TParam to handle case where collection items in .mtc file do not correspond to current definition.  I should eliminate the Assign methods and use only the new Populate methods.  The Assign methods will not work as expected if the order or meanings of parameter attributes are changed.  I probably should make similar changes to other classes that hold collections.

April 21, 2009

For TParamset and all other classes descended from TCollection, eliminate Empty method and invoke TCollection.Clear instead.

Edited TParameterSetupAttribute.Assign to eliminate assignment of ParamAttType and Text, and to always invoke inherited Assign to make those assignments.
Edited TDependentSetupAttribute.Assign to eliminate assignment of DepAttType and Text, and to always invoke inherited Assign to make those assignments.
Edited TPriorSetupAttribute.Assign to eliminate assignment of PriAttType and Text, and to always invoke inherited Assign to make those assignments.

April 22, 2009

Corrected bug that prevented saving of saving of Control Method set in Configure Parameter Tables form.

Move creation of instances of TFormEditor to TFormMain.FormCreate because two instances are required and if they are created in Program ModelMate, the IDE gets confused and rewrites Program ModelMate with lines that refer to nonexistent types (TFormEditorAppInput and TFormEditorAppOutput).

April 23, 2009

A number of changes needed to implement derived parameters.
Debugged problem importing observations when multiple OBS packages write output (simulated equivalents) to same output file.

June 8, 2009

Edited ModelMateClassesUnit.TProject.NumAdjustable to treat Derived='' the same as Derived='No', to be backward compatible with ver 0.10 and earlier.  Changed version to 0.11.1.

June 26, 2009

Added capability to recreate PVAL template file (when "Create UCODE_2005 Input Files" is clicked) after parameters are added to or deleted from Parameters Table.  For projects with multiple template files, this is undesirable; to disable this, added field fLinkTemplateToParamsTable and checkbox on frmModelSettings to control this.  Currently, the checkbox is enabled only when model type is MODFLOW-2005.  Changed version to 0.13.0.

Aug. 15, 2009

Added support for invoking Residual_analysis_adv from Post-processing menu.  
Changed version to 0.14.

Aug. 17, 2009

Changed default program locations related to Ucode to use directory UCODE_2005_1.016, in GlobalTypesUnit.pas.

Aug. 25-28, 2009

Worked on parallel-setup capability.

Oct. 6, 2009

Worked on parallel runners form, added moving and sorting capabilities.  Added code to limit number of runners written to Parallel_Runners block to NumRunnersToUse.  Moved ParallelControl and ParallelRunners objects from TProject to TUcProject.  Defined new type TProjectFile, which stores relative path but returns absolute path.  Added RunnerFiles field to TUcProject to store files that need to be copied to runner directories.

Oct. 15, 2009

Completed implementation of capability to set up parallel runners.  Includes:
* Selection, display, and storage of runner names, directories, and expected run times.
* Maintenance of all runner directories w/r/t files needed, automatic or manual.
* Starting of local runners, automatic or manual.

Oct. 29, 2009

Capability to import a Ucode file seems to be working.
Changed version to 0.15.

Nov. 2, 2009

The last version I sent to beta testers was version 0.13.  So I changed the version back to 0.14 to avoid confusion.

Jan. 26, 2010

Fixed bugs.  Made TProject.UsePriorInfo default to True.

Mar. 4, 2010

Been working on bugs.  Increased version number from 0.15.0 to 0.15.1.

Fixed bug that caused Parameters table to not be populated correctly (and loss of parameter data) when Derived column is shown.  Now, the Derived Parameters capability seems to be working.  Changed version to 0.16.0.

Mar. 5, 2010

Released beta version 0.16.0.  This version fixes bugs related to:
* Saving of predictions after deleting all groups.
* Multilayer head observations.
* Loss of parameter data after reconfiguration of Parameters table to show Derived column.

Mar. 8, 2010

Converted Observations table to type TRbwDataGrid4.

Mar. 10, 2010

Fixed bug that caused pathname to Residual_Analysis_Adv to not be saved after setting it in Program Locations.

Mar. 20, 2010

Revised Ucode tab to use popup menu, replacing several controls.  


Mar. 22, 2010

Changed version to 0.17.0.  Fine tuned button and menu alignment on Ucode tab.  Fixed bug that prevented changes to Derived setting on Parameters table to be saved.

Mar. 23, 2010

Released this version to beta testers as 0.17.0 (sent email).

Discovered bug that prevents a parameter group from being renamed. 

April 7, 2010

Set version to 0.18.0 for today's beta release.

April 22, 2010

Fixed bug that caused observation changes not to be saved after deleting an observation.
Fixed Program Locations form so all edit boxes resize when window width is changed; increased button heights.

April 26, 2010

Modify Observations and Predictions forms to always show Group Name in upper table.

Working on capability to delete multiple observations.

April 27, 2010

Can now select multiple observations with <ctrl>-click, and then delete them.  I can't get <shift>-click to select a range of observations.

To get <shift>-click to select a range of observations, TRbwDataGrid4.Options needs not to include goEditing, and it needs to include goRangeSelect.

Fixed bug that caused obs table headings to get unfixed.

May 4, 2010

Set rbwdgObs.AutoDistributeText to True.  This allows data copied from a spreadsheet (to clipboard) to be pasted into rbwdgObs grid.
Eliminated Configure menu on Observations form.

May 5, 2010

Fixed bugs in Parameters table related to changing, saving, and reverting parameter data.
Constrain width and height of Model Commands window.
Eliminated Configure menus on Predictions and Prior Information forms.

Set version to 0.19.0.

May 6, 2010

Eliminate "Analysis Application" menu and change UCODE from a submenu to a menu.

Change version to 0.20.0 and put this version on ftpext.

Added capability to assign new group name for all parameters when name is changed in Parameter Groups table.
Made it so that a new PVAL template file is created (when UCODE input files are written) if the name of the template file is changed in the Model Input and Template Files window.

May 12, 2010

Made bug fixes needed before replacing TDataGrid with TRbwDataGrid4 in ObsGps, Pred, PredGps, Pri, and PriGps tables.  Commited as rev. 1822.

May 13, 2010

Converted ObsGps, Pred, and PredGps tables from TDataGrid to TRbwDataGrid4.

May 19, 2010

Changed version to 0.21.0.  Changes since version 0.20.0 include:

Converted all Yes/No dropdown lists to checkboxes;
Added support for copying and pasting in all tables (groups and members of parameters, observations, predictions, and prior information);
Added option to freeze Parameter Name column in Parameters table (on Configure Parameter Tables window);
Renaming a group changes Group Name for all members of the group;
Column widths in tables are now set appropriately and are adjusted as needed; and
Numerous bug fixes.

June 21, 2010

Fixed bugs in Observations and Predictions windows that caused UseFlag settings not to be stored, which messed up export of Ucode input file.

June 22, 2010

Added code to shorten main form caption if width is too small to accommodate entire project pathname.

July 7, 2010

After changes involving directories and project name, changed version to 0.23.0.

July 14, 2010

Something happened yesterday that caused me to no longer be able to compile ModelMate on my desktop.  I ended up uninstalling JCL/JVCL and installing JCL 2.1 and JVCL 3.39.  Had to delete directories containing old versions of JCL/JVCL (just renaming them did not work) because compiler was using old .DCU files in the old directories instead of the new ones.  

I had to add various directories to Delphi IDE using Tools...Options...Environment Options...Delphi Options...Library - Win32...Library Path.

July 16, 2010

I changed TProject and added support for an ini file stored as: 
"C:\Documents and Settings\[user]\Application Data\WRDAPP\ModelMate\ModelMate.ini.

This is version 0.23.1.  Mtc files generated by an older version need to be edited to be readable by ModelMate.  To make a .mtc file readable by ver. 0.23.1, delete lines starting with "ProgramLocations".

July 20, 2010

Added Naming Convention form, which opens when user tries to use an invalid parameter, observation, prediction, or prior-information item name.

July 22, 2010

I changed the version number back to 0.23.0 for the next beta version, released today.

Oct. 6, 2010

Been working on bug fixes the last 3 days.  Changed version to 0.24.0, which will be the next beta version.
